<section class="py-5">
  <div class="container py-5">
    <h2 class="mb-4">Your Cart</h2>
    <div id="cart-items" class="row">
      <!-- Cart items will be dynamically inserted here -->
    </div>
    <div class="text-end mt-4">
      <h4>Total: <span id="total-price">Rp 0</span></h4>
      <a href="/checkout" class="btn btn-success btn-lg">Checkout</a>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const cartItemsContainer = document.getElementById("cart-items");
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    if (cart.length === 0) {
      cartItemsContainer.innerHTML = "<p>Your cart is empty.</p>";
      return;
    }

    let totalPrice = 0;

    cart.forEach((product) => {
      cartItemsContainer.innerHTML += `
        <div class="col-md-4 mb-4">
          <div class="card">
            <img src="${product.image}" class="card-img-top" alt="${product.name}" style="height: 150px; object-fit: cover;">
            <div class="card-body">
              <h5 class="card-title">${product.name}</h5>
              <p class="card-text">Rp ${product.price}</p>
              <button class="btn btn-danger remove-from-cart" data-id="${product.id}">Remove</button>
            </div>
          </div>
        </div>
      `;
      totalPrice += parseFloat(product.price);
    });

    document.getElementById("total-price").innerText = `Rp ${totalPrice}`;

    // Hapus item dari cart
    document.querySelectorAll(".remove-from-cart").forEach((button) => {
      button.addEventListener("click", function () {
        let id = this.getAttribute("data-id");
        let updatedCart = cart.filter((item) => item.id !== id);
        localStorage.setItem("cart", JSON.stringify(updatedCart));
        location.reload();
      });
    });
  });
</script>
